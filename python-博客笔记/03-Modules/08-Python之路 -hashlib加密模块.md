# Pythonä¹‹è·¯ - hashlibåŠ å¯†

##  ä»‹ç» ğŸ€

æ­¤æ¨¡å—æœ‰äººç§°ä¸ºæ‘˜è¦ç®—æ³•ï¼Œä¹Ÿå«åšåŠ å¯†ç®—æ³•ï¼Œæˆ–è€…æ˜¯å“ˆå¸Œç®—æ³•ï¼Œæ•£åˆ—ç®—æ³•ç­‰ç­‰ï¼Œè¿™ä¹ˆå¤štitleä¸ç”¨å¤§å®¶è®°ï¼Œé‚£ä¹ˆæœ‰åŒå­¦å°±é—®ä»–åˆ°åº•æ˜¯å¹²å•¥çš„ï¼Ÿ ç®€å•æ¥è¯´å°±æ˜¯åšåŠ å¯†å’Œæ ¡éªŒä½¿ç”¨ï¼Œå®ƒçš„å·¥ä½œåŸç†ç»™å¤§å®¶ç®€å•æè¿°ä¸€ä¸‹ï¼šå®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä»»æ„é•¿åº¦çš„æ•°æ®æŒ‰ç…§ä¸€å®šè§„åˆ™è½¬æ¢ä¸ºä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•°æ®ä¸²ï¼ˆé€šå¸¸ç”¨16è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚


#### hashlibçš„ç‰¹å¾ä»¥åŠä½¿ç”¨è¦ç‚¹ï¼š

1.bytesç±»å‹æ•°æ® ---> é€šè¿‡hashlibç®—æ³• ---> å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²

2.ä¸åŒçš„bytesç±»å‹æ•°æ®è½¬åŒ–æˆçš„ç»“æœä¸€å®šä¸åŒã€‚

3.ç›¸åŒçš„bytesç±»å‹æ•°æ®è½¬åŒ–æˆçš„ç»“æœä¸€å®šç›¸åŒã€‚

4.æ­¤è½¬åŒ–è¿‡ç¨‹ä¸å¯é€†ã€‚


#### hashlibçš„ä¸»è¦ç”¨é€”æœ‰ä¸¤ä¸ªï¼š

1.å¯†ç çš„åŠ å¯†ã€‚

2.æ–‡ä»¶ä¸€è‡´æ€§æ ¡éªŒã€‚


##  æ™®é€šå¯†ç åŠ å¯† ğŸ€

è¿™é‡Œä»¥md5åŠ å¯†æ–¹å¼ä¸ºä¾‹.åŠ å¯†æ­¥éª¤éå¸¸ç®€å•.åªéœ€è¦3ä¸ªæ­¥éª¤:

```
str1 = "jesse"

#1.å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡
md5 = hashlib.md5()

#2.è°ƒç”¨updateæ–¹æ³•ç»™å­—ç¬¦ä¸²åŠ å¯†
md5.update(str1.encode('utf-8'))

#3.æ‰“å°åŠ å¯†åçš„å€¼. #a1361cb85be840d6a2d762c68e4910e2
print(md5.hexdigest())
```
ä¸Šé¢å°±æ˜¯æ™®é€šçš„md5åŠ å¯†ï¼Œéå¸¸ç®€å•ï¼Œå‡ è¡Œä»£ç å°±å¯ä»¥äº†.å°†jesseå­—ç¬¦ä¸²åŠ å¯†æˆMD5å¯†æ–‡,ç”¨äºå­˜å‚¨å¯†ç ä¿¡æ¯.


#### å¦‚æœéœ€è¦åŠ å¯†çš„æ•°æ®é‡å¾ˆå¤§,å¯ä»¥å¤šæ¬¡update.ç„¶åæœ€åå¾—å‡ºåŠ å¯†å­—ç¬¦ä¸²

```
res = hashlib.md5()
res.update("jesse".encode('utf-8'))
res.update("Lyon".encode("utf-8"))
print(res.hexdigest())  #f3e1e5c71241e50ff3e373e6243e125e
```
ä¸Šé¢è®¡ç®—å‡ºæ¥çš„MD5å¯†æ–‡æ˜¯jesseLyonè¿™ä¸ªå­—ç¬¦ä¸²


## SHAåŠ å¯†ç®—æ³• ğŸ€

å¦ä¸€ç§å¸¸è§çš„æ‘˜è¦ç®—æ³•æ˜¯SHAï¼ŒSHAæœ‰ä¸åŒçš„åŠ å¯†å¤æ‚åº¦è®¡ç®—,ä¾‹å¦‚:sha1,sha224,sha512ç­‰ç­‰ï¼Œæ•°å­—è¶Šå¤§ï¼ŒåŠ å¯†çš„æ–¹æ³•è¶Šå¤æ‚ï¼Œå®‰å…¨æ€§è¶Šé«˜ï¼Œä½†æ˜¯æ•ˆç‡å°±ä¼šè¶Šæ…¢ã€‚

è°ƒç”¨SHAåŠ å¯†å’Œè°ƒç”¨MD5å®Œå…¨ç±»ä¼¼ï¼š

```
sha1 = hashlib.sha1()
sha1.update('jesse'.encode('utf-8'))
print(sha1.hexdigest())
```


## åŠ ç›åŠ å¯† ğŸ€

ä½†æ˜¯ç®€å•çš„å£ä»¤ï¼Œå¯ä»¥éå¸¸å®¹æ˜“çš„è®¡ç®—å‡ºè¿™äº›å¸¸ç”¨å£ä»¤çš„MD5å€¼ï¼Œå¾—åˆ°ä¸€ä¸ªåæ¨è¡¨.è¿™æ ·ï¼Œæ— éœ€ç ´è§£ï¼Œåªéœ€è¦å¯¹æ¯”æ•°æ®åº“çš„MD5ï¼Œé»‘å®¢å°±è·å¾—äº†ä½¿ç”¨å¸¸ç”¨å£ä»¤çš„ç”¨æˆ·è´¦å·ã€‚

å¯¹äºç”¨æˆ·æ¥è®²ï¼Œå½“ç„¶ä¸è¦ä½¿ç”¨è¿‡äºç®€å•çš„å£ä»¤ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬èƒ½å¦åœ¨ç¨‹åºè®¾è®¡ä¸Šå¯¹ç®€å•å£ä»¤åŠ å¼ºä¿æŠ¤å‘¢ï¼Ÿç”±äºå¸¸ç”¨å£ä»¤çš„MD5å€¼å¾ˆå®¹æ˜“è¢«è®¡ç®—å‡ºæ¥ï¼Œæ‰€ä»¥ï¼Œè¦ç¡®ä¿å­˜å‚¨çš„ç”¨æˆ·å£ä»¤ä¸æ˜¯é‚£äº›å·²ç»è¢«è®¡ç®—å‡ºæ¥çš„å¸¸ç”¨å£ä»¤çš„MD5ï¼Œ
è¿™ä¸€æ–¹æ³•é€šè¿‡å¯¹åŸå§‹å£ä»¤åŠ ä¸€ä¸ªå¤æ‚å­—ç¬¦ä¸²æ¥å®ç°ï¼Œä¿—ç§°â€œåŠ ç›â€ï¼š

#### å›ºå®šåŠ ç›

```
salt = hashlib.md5("addtional_info".encode('utf-8'))
salt.update('jesse'.encode('utf-8')) #å®é™…ä¸Šæ˜¯è®©jesse+addtional_info2ä¸ªå­—ç¬¦ä¸²ä¸€èµ·åŠ å¯†.
print(salt.hexdigest())  #è¿™æ ·å³ä½¿åˆ«äººçŸ¥é“ä½ å¯†ç ,ä½†æ˜¯ä¹Ÿæ— æ³•çŸ¥é“MD5åŠ å¯†å­—ç¬¦ä¸²
```

#### åŠ¨æ€çš„ç›

ä½†æ˜¯å¦‚æœé»‘å®¢é€šè¿‡æ‰‹æ®µçªƒå–åˆ°ä½ è¿™ä¸ªå›ºå®šçš„ç›ä¹‹åï¼Œä¹Ÿæ˜¯å¯ä»¥ç ´è§£å‡ºæ¥çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ¨æ€çš„ç›ã€‚

ä¸‹é¢æ˜¯ç”¨ç”¨æˆ·çš„usernameæ¥ä¸ºè¯¥ç”¨æˆ·çš„å¯†ç åŠ ç›:

```
username = input("è¯·è¾“å…¥ç”¨æˆ·å:").strip()
password = input("è¯·è¾“å…¥å¯†ç :").strip()

if username  and password:
    encrypt = hashlib.md5(username.encode("utf-8"))
    encrypt.update(password.encode("utf-8"))
    print(encrypt.hexdigest())
else:
    print("è¾“å…¥é”™è¯¯")

```
è¿™æ ·ï¼Œå®‰å…¨æ€§èƒ½å°±å¤§å¤§æé«˜äº†ã€‚


### åˆ©ç”¨hashlibç»™ç”¨æˆ·å¯†ç åŠ å¯†çš„ä¸€ä¸ªä¾‹å­

ä¸‹é¢æ˜¯åŠ å¯†ç®—æ³•åœ¨ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç™»å½•ç¨‹åºä¸­çš„ä½¿ç”¨

```
import hashlib,ast

def user_auth():
    ''' è®¡ç®—ç”¨æˆ·å¯†ç çš„åŠ å¯†å­—ç¬¦ä¸²'''

    username = input("è¯·è¾“å…¥ç”¨æˆ·å:").strip()
    password = input("è¯·è¾“å…¥å¯†ç :").strip()

    if username  and password:
        encrypt = hashlib.md5(username.encode("utf-8"))
        encrypt.update(password.encode("utf-8"))
        password = encrypt.hexdigest()
        return username,password
    else:
        print("è¾“å…¥é”™è¯¯")
        exit(1)


def register():
    '''æ³¨å†Œç”¨æˆ·'''

    username,password = user_auth()
    dic1 = {username:password}
    with open("user.db", 'w') as f:
        f.write(str(dic1))

def login():
    '''ç”¨æˆ·ç™»å½•'''

    with open("user.db", 'r') as f:
        dic1 = f.read()
    # å°†f.read()è¯»å–å‡ºæ¥çš„å­—ç¬¦ä¸²è½¬æ¢æˆå­—å…¸.json.loadsæ–¹æ³•ä¹Ÿå¯ä»¥å®ç°,
    # ä½†æ˜¯jsonæ¨¡å—è¦æ±‚æ˜¯åŒå¼•å·çš„å­—ç¬¦ä¸².è¿™é‡Œæ˜¯ä¸€ä¸ªå•å¼•å·çš„å­—ç¬¦ä¸²,æ‰€ä»¥éœ€è¦astæ¨¡å—
    dic1 = ast.literal_eval(dic1)
    username,password = user_auth()
    if username in dic1 and password == dic1[username]:
        print("æ­å–œç™»å½•æˆåŠŸ")
    else:
        print("ç”¨æˆ·å¯†ç è¾“å…¥ä¸æ­£ç¡®")


dict2 = {"1":register,"2":login}

print('''
1:register,2:login
''')

choise = input("è¯·è¾“å…¥åºå·:")

if choise in dict2:
    dict2[choise]()
else:
    print("è¾“å…¥é”™è¯¯")

```

## æ–‡ä»¶æ ¡éªŒ ğŸ€

hashlibæ¨¡å—é™¤äº†å¯ä»¥ç”¨äºå¯†ç åŠ å¯†ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯æ–‡ä»¶çš„ä¸€è‡´æ€§æ ¡éªŒã€‚æ–‡ä»¶æ ¡éªŒé€šå¸¸ç”¨æ¥æ¯”è¾ƒ2ä¸ªæ–‡ä»¶æ˜¯å¦æ˜¯åŒä¸€ä»½æ–‡ä»¶

```
import os,hashlib

def file_check(file_path):
    file_md5 = hashlib.md5()

    if os.path.isfile(file_path):
        with open(file_path,'r') as f:

        #ä¸‹é¢å¾ªç¯å¯ä»¥æ›¿æ¢æˆ:for line in f:
            for line in f.readlines():
                #å¾ªç¯æ–‡ä»¶,æ¯æ¬¡åªupdateä¸€è¡Œæ•°æ®.é¿å…ä¸€æ¬¡åŠ å¯†æ•´ä¸ªæ–‡ä»¶é€ æˆç³»ç»Ÿå´©æºƒ
                file_md5.update(line.encode('utf-8'))
        return file_md5.hexdigest()
    else:
        print("æ–‡ä»¶ä¸å­˜åœ¨")



#å¤åˆ¶2ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–‡ä»¶,è®¡ç®—å‡ºæ¥çš„MD5å€¼å®Œå…¨ç›¸åŒ

print(file_check('æ–‡ä»¶æ ¡éªŒ1.log')) #cae4133f1d66a901a90cdafaf6172c07
print(file_check('æ–‡ä»¶æ ¡éªŒ2.log')) #cae4133f1d66a901a90cdafaf6172c07

#å°†æ–‡ä»¶æ ¡éªŒ2.logæ–‡ä»¶æœ€åä¸€è¡Œåˆ é™¤ä¸€ä¸ªç©ºæ ¼,å†æ¬¡è®¡ç®—.å‘ç°MD5å€¼å·²ç»ä¸ä¸€æ ·

print(file_check('æ–‡ä»¶æ ¡éªŒ1.log'))  #cae4133f1d66a901a90cdafaf6172c07
print(file_check('æ–‡ä»¶æ ¡éªŒ2.log'))  #c48313c88156e33b7fc7ba21661dad59
```

